<!doctype html>
<html>
	<head>
		<title>Socket.IO chat</title>
		<link rel='stylesheet' type='text/css' href='app.css' />
		<script src='/socket.io/socket.io.js'></script>
		<script src='http://code.jquery.com/jquery-1.11.1.js'></script>
		<script>
$(document).ready(function () {
	var socket = io();
	var userName = prompt("Please enter your name", "Anonymous");
	userName = (userName != null)? userName : "Anonymous";
	$('#name_text').val(userName);
	socket.on('connect', function () {
		socket.emit("user.register", {user: userName});
	});
	$('#message_form').submit(function() {
		socket.emit('chat.msg', {
			message: $('#message_text').val(), 
			user: $('#name_text').val()});
		$('#message_text').val('');
		return false;
	});
	$('#name_form').submit(function() {
		return false;
	});
	socket.on('chat.msg', function(msg) {
		$('#messages').append($('<li>').text('[' + msg.user + '] : ' + msg.message));
	});
	socket.on('user.disconnect', function(msg) {
		$('#messages').append($('<li>').text('[' + msg.user + '] left the chat'));
	});
	socket.on('user.connect', function(msg) {
		$('#messages').append($('<li>').text('[' + msg.user + '] joined the chat'));
	});
});
		</script>
	</head>
	<body>
		<form id='name_form' action=''>
			<input id='name_text' autocomplete='off' />
		</form>
		<ul id='messages'></ul>
		<form id='message_form' action=''>
			<input id='message_text' autocomplete='off' /><button>Send</button>
		</form>
	</body>
</html>